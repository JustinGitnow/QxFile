# Update:2023.02
# å¥‡å¿ƒæ‡’äººé…ç½®3.0ä¸‹è½½ https://qxnav.com/rules/QuantumultX/qixin.conf


# å»ºè®®æ·»åŠ ä»¥ä¸‹æ•°æ®åº“
# https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb
# ä½¿ç”¨æ–¹æ³•ï¼šæ‰“å¼€QuantumultX - é£è½¦ - å…¶ä»–è®¾ç½® - GeoLite2 - æ¥æº ï¼Œç„¶åæŠŠä¸Šé¢é“¾æ¥è¾“è¿›å»ï¼Œé»˜è®¤7å¤©æ›´æ–°å°±å¯ä»¥äº†ã€‚


[general]
# ä»£ç†å»¶è¿Ÿæµ‹é€Ÿ URL 
# å¯¹æŒ‡å®šçš„ç½‘å€è¿›è¡Œç›¸åº”æµ‹è¯•ï¼Œä»¥ç¡®è®¤èŠ‚ç‚¹çš„å¯ç”¨æ€§
server_check_url=http://cp.cloudflare.com/generate_204
# èµ„æºè§£æå™¨
resource_parser_url= https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js
# geo_location_checker
# ç”¨äºèŠ‚ç‚¹é¡µé¢çš„ä¿¡æ¯å±•ç¤ºï¼Œå¯å®Œæ•´è‡ªå®šä¹‰
# geo_location_checker=http://ip-api.com/json/?lang=zh-CN, https://github.com/KOP-XIAO/QuantumultX/raw/master/Scripts/IP_API.js
geo_location_checker=disabled
# dns_exclusion_list
# listä¸­çš„åŸŸåå°†ä¸ä½¿ç”¨fake-ipæ–¹å¼, å¤šä¸ªåŸŸåç”¨â€œ, â€è¿æ¥ã€‚å…¶å®ƒåŸŸååˆ™å…¨éƒ¨é‡‡ç”¨ fake-ipåŠè¿œç¨‹è§£æçš„æ¨¡å¼
dns_exclusion_list = *.localnetwork.uop, *.qq.com, qq.com
# ä¸‹åˆ—è¡¨ä¸­å†…å®¹å°†ä¸ç»è¿‡ QuantumultX çš„å¤„ç†
excluded_routes=192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, 17.0.0.0/8
icmp_auto_reply=true


[dns]
no-ipv6
server=119.29.29.29
server=223.5.5.5
server=1.2.4.8
server=/*.taobao.com/223.5.5.5
server=/*.tmall.com/223.5.5.5
server=/*.alipay.com/223.5.5.5
server=/*.alicdn.com/223.5.5.5
server=/*.aliyun.com/223.5.5.5
server=/*.jd.com/119.28.28.28
server=/*.qq.com/119.28.28.28
server=/*.tencent.com/119.28.28.28
server=/*.weixin.com/119.28.28.28
server=/*.bilibili.com/119.29.29.29
server=/hdslb.com/119.29.29.29
server=/*.163.com/119.29.29.29
server=/*.126.com/119.29.29.29
server=/*.126.net/119.29.29.29
server=/*.127.net/119.29.29.29
server=/*.netease.com/119.29.29.29
server=/*.mi.com/119.29.29.29
server=/*.xiaomi.com/119.29.29.29
address=/mtalk.google.com/108.177.125.188
no-system
circumvent-ipv4-answer = 127.0.0.1, 0.0.0.0


[policy]
## ç­–ç•¥ç»„
## å°†åˆ†æµè§„åˆ™ä¼ é€’è¿‡æ¥çš„ç½‘ç»œè¯·æ±‚è¿›è¡Œåˆ†å‘
# è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜èŠ‚ç‚¹-HK
url-latency-benchmark=Auto-HK, server-tag-regex=æ¸¯, check-interval=600, tolerance=0, alive-checking=false, img-url=https://raw.githubusercontent.com/erdongchanyo/icon/main/Policy-Filter/Auto.png
# æœåŠ¡å™¨æŒ‰åœ°åŒºåˆ†ç»„ç­–ç•¥
# ç¾å›½
static=US, server-tag-regex=ç¾|ç¾å›½|ç¾|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥, img-url=https://raw.githubusercontent.com/erdongchanyo/icon/main/Policy-Country/US.png
# é¦™æ¸¯
static=HK, server-tag-regex=HK|é¦™æ¸¯|æ¸¯|ğŸ‡­ğŸ‡°ï¸|Hongkong, img-url=https://raw.githubusercontent.com/erdongchanyo/icon/main/Policy-Country/HK02.png
# æ—¥æœ¬
static= JP, server-tag-regex= æ—¥|æ—¥æœ¬|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|ğŸ‡¯ğŸ‡µ|JP, img-url=https://raw.githubusercontent.com/erdongchanyo/icon/main/Policy-Country/JP.png
# å°æ¹¾
static=TW, server-tag-regex=å°|å°æ¹¾|TW, img-url=https://raw.githubusercontent.com/erdongchanyo/icon/main/Policy-Country/TW02.png
# æ–°åŠ å¡
static=SG, server-tag-regex=ç‹®åŸ|æ–°|æ–°åŠ å¡|ğŸ‡¸ğŸ‡¬|SG, img-url=https://raw.githubusercontent.com/erdongchanyo/icon/main/Policy-Country/SG.png
# éŸ©å›½
static=KR, server-tag-regex=éŸ©å›½|éŸ©, img-url=https://raw.githubusercontent.com/erdongchanyo/icon/main/Policy-Country/KR.png
# Globalç­–ç•¥
static=Global, US, HK, JP, TW, SG, Final, direct, img-url=https://raw.githubusercontent.com/erdongchanyo/icon/main/Policy-Filter/Outside.png
# GlobalMediaç­–ç•¥
static=GlobalMedia, US, HK, JP, TW, SG, Final, direct, img-url=https://raw.githubusercontent.com/erdongchanyo/icon/main/Policy-Filter/GMedia.png
# å›½å¤–åª’ä½“ç»†åˆ†ç­–ç•¥
# > YouTubeç­–ç•¥
static=YouTube, US, HK, JP, TW, SG, Final, direct, img-url=https://raw.githubusercontent.com/erdongchanyo/icon/main/Policy-Filter/Youtube.png
# > TikTokç­–ç•¥
static=TikTok, US, JP, TW, SG, Final, direct, img-url=https://raw.githubusercontent.com/erdongchanyo/icon/main/Policy-Filter/Tiktok.png
# è½¯ä»¶&æœåŠ¡ç­–ç•¥
# > Telegramç­–ç•¥
static=Telegram, US, HK, JP, TW, SG, Final, direct, img-url=https://raw.githubusercontent.com/erdongchanyo/icon/main/Policy-Filter/Telegram.png
# > Twitterç­–ç•¥
static=Twitter, US, HK, JP, TW, SG, Final, direct, img-url=https://raw.githubusercontent.com/erdongchanyo/icon/main/Policy-Filter/Twitter.png
# > Speedtestç­–ç•¥
static=Speedtest, US, HK, JP, TW, SG, Final, direct, img-url=https://raw.githubusercontent.com/erdongchanyo/icon/main/Policy-Filter/Speedtest.png
# > Appleç­–ç•¥
static=Apple, US, HK, JP, TW, SG, Final, direct, img-url=https://raw.githubusercontent.com/erdongchanyo/icon/main/Policy-Filter/Apple.png
# > Googleç­–ç•¥
static=Google, US, HK, JP, TW, SG, Final, direct, img-url=https://raw.githubusercontent.com/erdongchanyo/icon/main/Policy-Filter/Google.png
# # Mainlandç­–ç•¥-å›½å†…è®¿é—®
static=Mainland, Final, direct, img-url=https://raw.githubusercontent.com/erdongchanyo/icon/main/Policy-Filter/Mainland.png
# Advertisingç­–ç•¥-å»å¹¿å‘Š
static=Advertising, direct, reject, img-url=https://raw.githubusercontent.com/erdongchanyo/icon/main/Policy-Filter/AdBlock.png
# FINALç­–ç•¥ï¼šå¦‚æœä»¥ä¸Šçš„ç­–ç•¥å‡æœªè¢«åŒ¹é…åˆ°ï¼Œåˆ™å¬ä»æ­¤ç­–ç•¥ç»„çš„è§„å®š
static=Final, Auto-HK, proxy, direct, img-url=https://raw.githubusercontent.com/erdongchanyo/icon/main/Policy-Filter/Final01.png


[server_local]
# æœ¬åœ°æœåŠ¡å™¨èŠ‚ç‚¹


[server_remote]
# èŠ‚ç‚¹è¿œç¨‹è®¢é˜…ï¼Œè‡ªè¡Œæ·»åŠ 


[filter_remote]
## è¿œç¨‹åˆ†æµè§„åˆ™è®¢é˜…
## å°†ç½‘ç»œè¯·æ±‚è¿›è¡Œåˆ†æµï¼Œç½‘ç»œè¯·æ±‚çš„èµ°å‘(æ˜¯å¦èƒ½æˆåŠŸè®¿é—®)ç”±åŒ¹é…åˆ°çš„ç­–ç•¥ç»„å†³å®š
# éƒ¨åˆ†è§„åˆ™æœ‰å…ˆåé¡ºåºè¦æ±‚ï¼Œè°ƒæ•´é¡ºåºå¯èƒ½å¤±æ•ˆ
# Speedtestè§„åˆ™
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Speedtest/Speedtest.list, tag=Speedtest è§„åˆ™, force-policy=Speedtest, update-interval=86400, opt-parser=false, enabled=true
# YouTubeè§„åˆ™
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX//YouTube/YouTube.list, tag=YouTube è§„åˆ™, force-policy=YouTube, update-interval=86400, opt-parser=false, enabled=true
# TikTokè§„åˆ™
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/TikTok/TikTok.list, tag=TikTok è§„åˆ™, force-policy=TikTok, update-interval=86400, opt-parser=false, enabled=true
# GlobalMediaè§„åˆ™
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/GlobalMedia/GlobalMedia.list, tag=GlobalMedia è§„åˆ™, force-policy=GlobalMedia, update-interval=86400, opt-parser=false, enabled=true
# Telegramè§„åˆ™
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Telegram/Telegram.list, tag=Telegram è§„åˆ™, force-policy=Telegram, update-interval=86400, opt-parser=false, enabled=true
# Twitterè§„åˆ™
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Twitter/Twitter.list, tag=Twitterè§„åˆ™, force-policy=Twitter, update-interval=86400, opt-parser=false, enabled=true
# Googleè§„åˆ™
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Google/Google.list, tag=Googleè§„åˆ™, force-policy=Google, update-interval=86400, opt-parser=false, enabled=true
# Appleè§„åˆ™
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Apple/Apple.list, tag=Apple è§„åˆ™, force-policy=Apple, update-interval=86400, opt-parser=false, enabled=true
# Globalè§„åˆ™
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/release/rule/QuantumultX/Global/Global.list, tag=Global è§„åˆ™, force-policy=Global, update-interval=86400, opt-parser=false, enabled=true
# Advertisingè§„åˆ™
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Advertising/Advertising.list, tag=Advertising è§„åˆ™, force-policy=Advertising, update-interval=86400, opt-parser=true, enabled=true
# Mainlandè§„åˆ™
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/China/China.list, tag=Mainland è§„åˆ™, force-policy=Mainland, update-interval=86400, opt-parser=false, enabled=true


[filter_local]
# æœ¬åœ°åˆ†æµè§„åˆ™(ç›¸åŒè§„åˆ™ä¸‹ï¼Œæœ¬åœ°è§„åˆ™å°†è¦†ç›–è¿œç¨‹è§„åˆ™ï¼Œä¼˜å…ˆç”Ÿæ•ˆ)
# é¿å…è¿…é›·ç‰ˆæƒé—®é¢˜
host, hub5idx.v6.shub.sandai.net, reject
host, hub5emu.v6.shub.sandai.net, reject
host, hub5btmain.v6.shub.sandai.net, reject

# å…¶ä»–
host-suffix, local, direct
host-keyword, merlinblog, proxy
ip-cidr, 10.0.0.0/8, direct
ip-cidr, 17.0.0.0/8, direct
ip-cidr, 100.64.0.0/10, direct
ip-cidr, 127.0.0.0/8, direct
ip-cidr, 172.16.0.0/12, direct
ip-cidr, 192.168.0.0/16, direct
geoip, cn, å¤§é™†æœåŠ¡
final, å¤§é™†æœåŠ¡

[rewrite_remote]
# rewrite å¤å†™è¿œç¨‹è®¢é˜…

https://qxnav.com/rules/QuantumultX/gz/qxrules.conf, tag=å¥‡å¿ƒè§„åˆ™åˆé›†, update-interval=172800, opt-parser=true, enabled=true
https://qxnav.com/rules/QuantumultX/gz/bilibili.conf, tag=å“”å“©å“”å“©, update-interval=172800, opt-parser=false, enabled=false
https://raw.githubusercontent.com/zwf234/rules/master/QuantumultX/tailadv.conf, tag=å»å¼€å±å¹¿å‘Š, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/zwf234/rules/master/TikTok/US.conf, tag=è§£é”TikTokï¼ˆæ›´æ”¹åç¼€æ¢åŒºï¼‰, update-interval=86400, opt-parser=true, enabled=false
https://qxnav.com/rules/QuantumultX/gz/getCookie1.conf, tag=è·å–Cookie1ï¼ˆè·å–å®Œå°±ç¦ç”¨ï¼‰, update-interval=86400, opt-parser=false, enabled=false
https://qxnav.com/rules/QuantumultX/gz/getCookie.conf, tag=è·å–Cookieï¼ˆè·å–å®Œå°±ç¦ç”¨ï¼‰, update-interval=86400, opt-parser=true, enabled=true


[rewrite_local]
#æœ¬åœ°å¤å†™è§„åˆ™


#æ·»åŠ æ–¹æ³•ï¼šæ‰“å¼€æ„é€ è¯·æ±‚ï¼Œæœ€ä¸Šæ–¹ç¬¬ä¸€ä¸ªæŒ‰é’®ï¼Œå³ä¸Šè§’+å·æ·»åŠ å³å¯
[task_local]
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/geo_location.js, tag=GeoIP æŸ¥è¯¢, img-url=location.fill.viewfinder.system, enabled=true
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/streaming-ui-check.js, tag=æµåª’ä½“-è§£é”æŸ¥è¯¢, img-url=checkmark.seal.system, enabled=true


[mitm]
# å¼€å¯ mitmï¼Œéœ€è¦è‡ªè¡Œåœ¨Quantumult Xä¸­ç”Ÿæˆè¯ä¹¦ã€å®‰è£…ã€ä¿¡ä»»
skip_validating_cert = false
force_sni_domain_name = false
hostname = sub.store, -*.amemv.com, -*.snssdk.com
simple_cert_hostname=sub.store
